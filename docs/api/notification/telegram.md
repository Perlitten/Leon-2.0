# –ú–æ–¥—É–ª—å Telegram

–ú–æ–¥—É–ª—å `notification.telegram` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º —á–µ—Ä–µ–∑ Telegram.

## –ö–ª–∞—Å—Å TelegramBot

–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API.

```python
from notification.telegram.bot import TelegramBot
from core.config_manager import ConfigManager
from core.localization import LocalizationManager

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
config_manager = ConfigManager()
localization = LocalizationManager()
telegram_bot = TelegramBot(config_manager, localization)

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
telegram_bot.set_orchestrator(orchestrator)

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
await telegram_bot.start()

# –ò–ª–∏ –∑–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
telegram_bot.start_in_background()

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
await telegram_bot.send_message("–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!")

# –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç–æ—Ä–≥–æ–≤–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
await telegram_bot.send_trade_notification(
    symbol="BTCUSDT",
    direction="BUY",
    price=50000.0,
    size=0.1,
    pnl=None
)

# –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
await telegram_bot.send_status_update(
    symbol="BTCUSDT",
    mode="dry",
    balance=1000.0,
    leverage=20,
    risk_per_trade=2.0,
    stop_loss=2.0,
    take_profit=3.0
)

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
await telegram_bot.stop()
```

### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```python
def __init__(self, config_manager: ConfigManager, localization: LocalizationManager)
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `config_manager` - –ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `localization` - –ú–µ–Ω–µ–¥–∂–µ—Ä –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

### –ú–µ—Ç–æ–¥—ã

#### start

```python
async def start(self)
```

–ó–∞–ø—É—Å–∫–∞–µ—Ç Telegram –±–æ—Ç–∞.

#### start_in_background

```python
def start_in_background(self)
```

–ó–∞–ø—É—Å–∫–∞–µ—Ç Telegram –±–æ—Ç–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

#### stop

```python
async def stop(self)
```

–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Telegram –±–æ—Ç–∞.

#### set_orchestrator

```python
def set_orchestrator(self, orchestrator)
```

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `orchestrator` - –≠–∫–∑–µ–º–ø–ª—è—Ä –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### send_message

```python
async def send_message(self, text: str, reply_markup: Optional[InlineKeyboardMarkup] = None) -> None
```

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `text` - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `reply_markup` - –†–∞–∑–º–µ—Ç–∫–∞ –¥–ª—è –∫–Ω–æ–ø–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### send_trade_notification

```python
async def send_trade_notification(self, 
                                 symbol: str, 
                                 direction: str, 
                                 price: float, 
                                 size: float, 
                                 pnl: Optional[float] = None) -> None
```

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç–æ—Ä–≥–æ–≤–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `symbol` - –°–∏–º–≤–æ–ª —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—Ä—ã
- `direction` - –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏ (BUY/SELL)
- `price` - –¶–µ–Ω–∞
- `size` - –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
- `pnl` - –ü—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### send_status_update

```python
async def send_status_update(self, 
                            symbol: str, 
                            mode: str, 
                            balance: float, 
                            leverage: int, 
                            risk_per_trade: float,
                            stop_loss: float,
                            take_profit: float) -> None
```

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `symbol` - –°–∏–º–≤–æ–ª —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—Ä—ã
- `mode` - –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
- `balance` - –ë–∞–ª–∞–Ω—Å
- `leverage` - –ü–ª–µ—á–æ
- `risk_per_trade` - –†–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É
- `stop_loss` - –°—Ç–æ–ø-–ª–æ—Å—Å
- `take_profit` - –¢–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

Telegram –±–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- `/help` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
- `/status` - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞
- `/trade` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–ª–µ–π
- `/balance` - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
- `/positions` - –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- `/mode` - –ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã

## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏

–ë–æ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

- –û—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é:
  - –°—Ç–∞—Ç—É—Å
  - –ü–æ–º–æ—â—å
  - –†–µ–∂–∏–º—ã
  - –¢–æ—Ä–≥–æ–≤–ª—è

- –ú–µ–Ω—é —Ç–æ—Ä–≥–æ–≤–ª–∏:
  - –û—Ç–∫—Ä—ã—Ç—å LONG
  - –û—Ç–∫—Ä—ã—Ç—å SHORT
  - –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏
  - –ù–∞–∑–∞–¥

- –ú–µ–Ω—é —Ä–µ–∂–∏–º–æ–≤:
  - –°–∏–º—É–ª—è—Ü–∏—è
  - –ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥
  - –†–µ–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è
  - –ù–∞–∑–∞–¥

## –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç–æ—Ä–≥–æ–≤–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

```
StableTrade
üöÄ *–°–∏–º—É–ª—è—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞*

üü¢ *–û—Ç–∫—Ä—ã—Ç–∞ –î–õ–ò–ù–ù–ê–Ø –ø–æ–∑–∏—Ü–∏—è*
‚óÜ –ü–∞—Ä–∞: *USDCUSDT*
‚óÜ –¶–µ–Ω–∞: *0.99978000*
‚óÜ –†–∞–∑–º–µ—Ä: *399.42226832*
üïí *2025-03-05 16:15:46*

üí¨ _–ù–µ —Å—á–∏—Ç–∞–π –¥–µ–Ω—å–≥–∏, –ø–æ–∫–∞ –æ–Ω–∏ –Ω–µ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∏—Å—å –≤ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫. –°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Å—è –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–µ._
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

```
StableTrade
üöÄ *–°–∏–º—É–ª—è—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞*

‚óÜ –°–∏–º–≤–æ–ª: *USDCUSDT*
‚óÜ –†–µ–∂–∏–º: *–°–∏–º—É–ª—è—Ü–∏—è (Dry Mode)*
‚óÜ –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å: *500.0 USDT*
‚óÜ –ü–ª–µ—á–æ: *20x*
‚óÜ –†–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É: *2.0%*
‚óÜ –°—Ç–æ–ø-–ª–æ—Å—Å: *2.0%*
‚óÜ –¢–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç: *3.0%*
üïí *2025-03-05 15:26:07*
``` 